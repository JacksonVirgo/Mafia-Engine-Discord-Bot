generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  discordId    String  @unique
  nickname     String
  avatarURL    String?
  displayColor Int?
  signupBan    Boolean @default(false)

  createdAt DateTime @default(now())

  queuedGames   HostsForQueuedGames? @relation(fields: [queuedGameIds], references: [id])
  queuedGameIds String?
}

/// GAME QUEUES

model GameQueue {
  gameTag    String       @unique
  fullTitle  String?
  QueuedGame QueuedGame[]
}

model QueuedGame {
  id       String    @id @default(uuid())
  queue    GameQueue @relation(fields: [queueTag], references: [gameTag])
  queueTag String

  title       String
  playerCount Int?

  hosts   HostsForQueuedGames @relation(fields: [hostsId], references: [id])
  hostsId String
}

model HostsForQueuedGames {
  id         String       @id @default(uuid())
  hosts      User[]
  queuedGame QueuedGame[]
}
